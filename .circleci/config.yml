version: 2
jobs:
  build:
    docker:
        - image: ubuntu:xenial
    steps:
      - checkout
      - run:
          name: deps
          command: apt-get update && apt-get install -y git less wget cmake xvfb build-essential qt5-default
      - run:
          name: compile
          command: export TERM=xterm; cmake CMakeLists.txt; make
      - run:
          name: regressions
          command: export TERM=xterm;  xvfb-run ./sqa/bin/runRegTests.sh
      - store_artifacts:
          path: /root/project/sqa/
